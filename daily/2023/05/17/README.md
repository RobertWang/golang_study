# Go 每日一题

> 今日（2023-05-17）的题目如下

下面代码有什么问题？

```golang
package main

const cl = 100

var bl = 123

func main()  {
    println(&bl,bl)
    println(&cl,cl)
}
```

<details>
<summary>答案解析：</summary>
<div>

考点：常量

常量不同于变量的在运行期分配内存，常量通常会被编译器在预处理阶段直接展开，作为指令数据使用，

```golang
cannot take the address of cl
```

#### 内存四区概念：

- A. 数据类型本质：
	固定内存大小的别名
- B. 数据类型的作用：
	编译器预算对象(变量)分配的内存空间大小。
- C. 内存四区


#### 流程说明

1. 操作系统把物理硬盘代码load到内存
2. 操作系统把c代码分成四个区
3. 操作系统找到main函数入口执行

#### 栈区(Stack)：

空间较小，要求数据读写性能高，数据存放时间较短暂。由编译器自动分配和释放，存放函数的参数值、函数的调用流程方法地址、局部变量等(局部变量如果产生逃逸现象，可能会挂在在堆区)

#### 堆区(heap):

空间充裕，数据存放时间较久。一般由开发者分配及释放(但是Golang中会根据变量的逃逸现象来选择是否分配到栈上或堆上)，启动Golang的GC由GC清除机制自动回收。

#### 全局区-静态全局变量区:

全局变量的开辟是在程序在`main`之前就已经放在内存中。而且对外完全可见。即作用域在全部代码中，任何同包代码均可随时使用，在变量会搞混淆，而且在局部函数中如果同名称变量使用`:=`赋值会出现编译错误。

全局变量最终在进程退出时，由操作系统回收。

>	我~~么~~们在开发的时候，尽量减少使用全局变量的设计

#### 全局区-常量区：

常量区也归属于全局区，常量为存放数值字面值单位，即不可修改。或者说的有的常量是直接挂钩字面值的。

比如:

```golang
const cl = 10
```

cl是字面量10的对等符号。

所以在golang中，常量是无法取出地址的，因为字面量符号并没有地址而言。

---

### 7 楼

感谢，有些问题想请教： 

1. 指令数据什么意思？
2. 虚拟内存那张图里两个栈区，是不是有一个是堆？
3. 代码区里是放什么，go不是编译成二进制了


### 11 楼

常量是无法取出地址的，常量为存放数值字面值单位，所以字面量符号并没有地址而言。

### 15 楼

>	println(&cl,cl)   cl 是常量，编译的时候已经变成对应的值了，也就是没有地址了。

</div>
</details>
